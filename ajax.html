<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="app">
      <script>
        /*
            $.ajax('', {
                // method, default : get
                type : '',
                // 서버로 전송할 데이터의 content-type
                // default : application/x-www-form-urlencoded

                // 명시하는 경우는 JSON : application/JSON
                contentType: '', fetch의 header

                // 서버로 전송할 데이터 : object => queryStirng
                data: {} fetch의 body, data 타입은 반드시 *객체 형태*

                // 서버로 통신을 하기 직전 추가 작엄 ex) token
                beforeSend : function(xhr) { // ajax가 실제로 통신을 하기위한 객체
                    
                }
            })
            .done(result => console.log(result)) // 통신이 성공한 경우
            .done(result => console.log(result)) done 원하는만큼 추가 작업 가능
            .fail(err => console.log(err)); // 통신이 실패한 경우
         */
        // 전체 조회
        $.ajax("http://localhost:8080/app/emps") // fetch
          .done((result) => {
            // then
            console.log(result);
          })
          .fail((err) => console.log(err)); // catch

        // 단건 조회
        $.ajax("http://localhost:8080/app/emps/100") // fetch
          .done((result) => {
            // then
            console.log("EmpInfo", result);
          })
          .fail((err) => console.log(err)); // catch

        // 등록
        let info = {
          lastName: "Ann",
          email: "ann12@naver.com", // uniqe 제약 조건
          hireDate: "2024-01-18", // yyyy-MM-dd
          jobId: "IT_PROG", // foriegn key
          salary: 10000,
        };

        $.ajax("http://localhost:8080/app/emps", {
          type: "post",
          contentType: "application/json",
          data: JSON.stringify(info), // info 만 보내면 key=value 형식으로 보내짐.
        })
          .done((result) => {
            console.log("Insert", result);
          })
          .fail((err) => console.log(err));
      </script>
    </div>
  </body>
</html>
